"use strict";(self.webpackChunkfreshcartapp=self.webpackChunkfreshcartapp||[]).push([[558],{4558:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var t=a(5043),n=a(3892),o=a(899);const r={"main-color":"Checkout_main-color__gRFi+","bg-main":"Checkout_bg-main__ETDZ-",sectionBg:"Checkout_sectionBg__Dks6y","btn-main":"Checkout_btn-main__2WMt1",inputContainer:"Checkout_inputContainer__6IXAS"};var i=a(5169),c=a(7154),l=a(3401),d=a(3216),h=a(1591),m=a(579);function u(){const{cartId:e,setNumOfCartItems:s}=(0,t.useContext)(i.M),a=(0,d.Zp)(),[u,p]=(0,t.useState)(!1),x=window.location.host,y=u?"https://ecommerce.routemisr.com/api/v1/orders/checkout-session/".concat(e,"?url=http://").concat(x):"https://ecommerce.routemisr.com/api/v1/orders/".concat(e),b=o.Ik({phone:o.Yj().matches(/^01[0125][0-9]{8}$/,"Invalid Phone number").required("please enter your phone number"),city:o.Yj().required("please enter your city"),details:o.Yj().required("please enter your address")}),j=(0,n.Wx)({initialValues:{phone:"",city:"",details:""},validationSchema:b,onSubmit:e=>{!async function(e){try{let{data:t}=await c.A.post("".concat(y),{shippingAddress:e},{headers:{token:localStorage.getItem("token")}});"success"===t.status?(s(0),l.oR.success("Your order has been placed successfully"),u?window.location.href=t.session.url:setTimeout((()=>{a("/allorders")}),3e3)):l.oR.error("Sorry, Failed to place your order")}catch(t){console.log(t)}}(e)}});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(h.m,{children:[(0,m.jsx)("meta",{charSet:"utf-8"}),(0,m.jsx)("title",{children:"Checkout"}),(0,m.jsx)("meta",{name:"description",content:"FreshCart App - Checkout"}),(0,m.jsx)("meta",{name:"keywords",content:"Fresh-Cart-App-Checkout"})]}),(0,m.jsx)("section",{className:"sectionBg min-vh-100 py-5",children:(0,m.jsxs)("div",{className:"container my-5",children:[(0,m.jsx)("h2",{className:"main-color mb-4 fw-bolder",children:"Checkout"}),(0,m.jsxs)("form",{onSubmit:j.handleSubmit,className:"form-group mb-3 pt-3",children:[(0,m.jsxs)("div",{className:"".concat(r.inputContainer),children:[(0,m.jsx)("input",{id:"phone",name:"phone",type:"tel",autoComplete:"off",className:"form-control border-0 shadow-sm py-2 rounded-3",placeholder:"Phone Number",onChange:j.handleChange,value:j.values.phone,onBlur:j.handleBlur}),(0,m.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),j.touched.phone&&j.errors.phone&&(0,m.jsxs)("span",{className:"text-danger",children:[(0,m.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",j.errors.phone]})]}),(0,m.jsxs)("div",{className:"".concat(r.inputContainer),children:[(0,m.jsx)("input",{id:"city",name:"city",type:"text",autoComplete:"off",className:"form-control border-0 shadow-sm py-2 rounded-3",placeholder:"City",onChange:j.handleChange,value:j.values.city,onBlur:j.handleBlur}),(0,m.jsx)("label",{htmlFor:"city",children:"City"}),j.touched.city&&j.errors.city&&(0,m.jsxs)("span",{className:"text-danger",children:[(0,m.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",j.errors.city]})]}),(0,m.jsxs)("div",{className:"".concat(r.inputContainer),children:[(0,m.jsx)("textarea",{name:"details",id:"details",cols:"30",rows:"4",className:"form-control border-0 shadow-sm py-2 rounded-3",placeholder:"Address",onChange:j.handleChange,value:j.values.details,onBlur:j.handleBlur}),(0,m.jsx)("label",{htmlFor:"details",children:"Address"}),j.touched.details&&j.errors.details&&(0,m.jsxs)("span",{className:"text-danger",children:[(0,m.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",j.errors.details]})]}),(0,m.jsxs)("div",{className:"d-flex justify-content-evenly align-items-center",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("input",{className:"form-check-input bg-main",type:"checkbox",id:"online",onChange:()=>p(!u)})," ",(0,m.jsx)("label",{className:"main-color ms-2",htmlFor:"online",children:"Online payment"})]}),u?(0,m.jsx)("button",{type:"submit",id:"btn-main",className:"btn rounded-3 mt-3 w-25",disabled:!(j.isValid&&j.dirty),children:"Pay Online"}):(0,m.jsx)("button",{type:"submit",id:"btn-main",className:"btn rounded-3 mt-3 w-25",disabled:!(j.isValid&&j.dirty),children:"Cash On Delivery"})]})]})]})})]})}}}]);
//# sourceMappingURL=558.ecec1dc8.chunk.js.map