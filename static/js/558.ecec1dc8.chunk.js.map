{"version":3,"file":"static/js/558.ecec1dc8.chunk.js","mappings":"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","sources":["webpack://freshcartapp/./src/Components/Checkout/Checkout.module.scss?3ba1","Components/Checkout/Checkout.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"main-color\":\"Checkout_main-color__gRFi+\",\"bg-main\":\"Checkout_bg-main__ETDZ-\",\"sectionBg\":\"Checkout_sectionBg__Dks6y\",\"btn-main\":\"Checkout_btn-main__2WMt1\",\"inputContainer\":\"Checkout_inputContainer__6IXAS\"};","import React, { useContext, useState } from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport styles from \"./Checkout.module.scss\";\r\nimport { CartContext } from \"../../context/CartContext\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nexport default function Checkout() {\r\n  const { cartId, setNumOfCartItems } = useContext(CartContext);\r\n  const navigate = useNavigate();\r\n  const [onlinePayment, setOnlinePayment] = useState(false);\r\n  \r\n  const host = window.location.host;\r\n\r\n\r\n  const url = onlinePayment\r\n    ? `https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${cartId}?url=http://${host}`\r\n    : `https://ecommerce.routemisr.com/api/v1/orders/${cartId}`;\r\n\r\n  const initialValues = {\r\n    phone: \"\",\r\n    city: \"\",\r\n    details: \"\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    phone: Yup.string()\r\n      .matches(/^01[0125][0-9]{8}$/, \"Invalid Phone number\")\r\n      .required(\"please enter your phone number\"),\r\n\r\n    city: Yup.string().required(\"please enter your city\"),\r\n\r\n    details: Yup.string().required(\"please enter your address\"),\r\n  });\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    validationSchema,\r\n    onSubmit: (values) => {\r\n      handelPayment(values);\r\n    },\r\n  });\r\n\r\n  async function handelPayment(values) {\r\n    try {\r\n      let { data } = await axios.post(\r\n        `${url}`,\r\n        { shippingAddress: values },\r\n        { headers: { token: localStorage.getItem(\"token\") } }\r\n      );\r\n\r\n      if (data.status === \"success\") {\r\n        setNumOfCartItems(0);\r\n        toast.success(\"Your order has been placed successfully\");\r\n\r\n        onlinePayment\r\n          ? (window.location.href = data.session.url)\r\n          : setTimeout(() => {\r\n              navigate(\"/allorders\");\r\n            }, 3000);\r\n\r\n      } else {\r\n        toast.error(\"Sorry, Failed to place your order\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <meta charSet=\"utf-8\" />\r\n        <title>Checkout</title>\r\n        <meta name=\"description\" content=\"FreshCart App - Checkout\" />\r\n        <meta name=\"keywords\" content=\"Fresh-Cart-App-Checkout\" />\r\n      </Helmet>\r\n\r\n      <section className=\"sectionBg min-vh-100 py-5\">\r\n        <div className=\"container my-5\">\r\n          <h2 className=\"main-color mb-4 fw-bolder\">Checkout</h2>\r\n\r\n          <form onSubmit={formik.handleSubmit} className=\"form-group mb-3 pt-3\">\r\n            {/* Phone Number */}\r\n            <div className={`${styles.inputContainer}`}>\r\n              <input\r\n                id=\"phone\"\r\n                name=\"phone\"\r\n                type=\"tel\"\r\n                autoComplete=\"off\"\r\n                className=\"form-control border-0 shadow-sm py-2 rounded-3\"\r\n                placeholder=\"Phone Number\"\r\n                onChange={formik.handleChange}\r\n                value={formik.values.phone}\r\n                onBlur={formik.handleBlur}\r\n              />\r\n\r\n              <label htmlFor=\"phone\">Phone Number</label>\r\n\r\n              {formik.touched.phone && formik.errors.phone && (\r\n                <span className=\"text-danger\">\r\n                  <i className=\"fa-solid fa-circle-exclamation\"></i>{\" \"}\r\n                  {formik.errors.phone}\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            {/* City */}\r\n            <div className={`${styles.inputContainer}`}>\r\n              <input\r\n                id=\"city\"\r\n                name=\"city\"\r\n                type=\"text\"\r\n                autoComplete=\"off\"\r\n                className=\"form-control border-0 shadow-sm py-2 rounded-3\"\r\n                placeholder=\"City\"\r\n                onChange={formik.handleChange}\r\n                value={formik.values.city}\r\n                onBlur={formik.handleBlur}\r\n              />\r\n\r\n              <label htmlFor=\"city\">City</label>\r\n\r\n              {formik.touched.city && formik.errors.city && (\r\n                <span className=\"text-danger\">\r\n                  <i className=\"fa-solid fa-circle-exclamation\"></i>{\" \"}\r\n                  {formik.errors.city}\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            {/* Address */}\r\n            <div className={`${styles.inputContainer}`}>\r\n              <textarea\r\n                name=\"details\"\r\n                id=\"details\"\r\n                cols=\"30\"\r\n                rows=\"4\"\r\n                className=\"form-control border-0 shadow-sm py-2 rounded-3\"\r\n                placeholder=\"Address\"\r\n                onChange={formik.handleChange}\r\n                value={formik.values.details}\r\n                onBlur={formik.handleBlur}\r\n              ></textarea>\r\n\r\n              <label htmlFor=\"details\">Address</label>\r\n\r\n              {formik.touched.details && formik.errors.details && (\r\n                <span className=\"text-danger\">\r\n                  <i className=\"fa-solid fa-circle-exclamation\"></i>{\" \"}\r\n                  {formik.errors.details}\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"d-flex justify-content-evenly align-items-center\">\r\n              <div>\r\n                <input\r\n                  className=\"form-check-input bg-main\"\r\n                  type=\"checkbox\"\r\n                  id=\"online\"\r\n                  onChange={() => setOnlinePayment(!onlinePayment)}\r\n                />{\" \"}\r\n                <label className=\"main-color ms-2\" htmlFor=\"online\">\r\n                  Online payment\r\n                </label>\r\n              </div>\r\n\r\n              {onlinePayment ? (\r\n                <button\r\n                  type=\"submit\"\r\n                  id=\"btn-main\"\r\n                  className=\"btn rounded-3 mt-3 w-25\"\r\n                  disabled={!(formik.isValid && formik.dirty)}\r\n                >\r\n                  Pay Online\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  type=\"submit\"\r\n                  id=\"btn-main\"\r\n                  className=\"btn rounded-3 mt-3 w-25\"\r\n                  disabled={!(formik.isValid && formik.dirty)}\r\n                >\r\n                  Cash On Delivery\r\n                </button>\r\n              )}\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n"],"names":["Checkout","cartId","setNumOfCartItems","useContext","CartContext","navigate","useNavigate","onlinePayment","setOnlinePayment","useState","host","window","location","url","concat","validationSchema","Yup","phone","matches","required","city","details","formik","useFormik","initialValues","onSubmit","values","async","data","axios","post","shippingAddress","headers","token","localStorage","getItem","status","toast","success","href","session","setTimeout","error","console","log","handelPayment","_jsxs","_Fragment","children","Helmet","_jsx","charSet","name","content","className","handleSubmit","styles","inputContainer","id","type","autoComplete","placeholder","onChange","handleChange","value","onBlur","handleBlur","htmlFor","touched","errors","cols","rows","disabled","isValid","dirty"],"sourceRoot":""}